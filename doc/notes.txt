
	QUICK NOTES

- _msg_frame_draw_param используется в единственном месте игры для рисования рамки. но эта функция гораздо шире в применении. размер рамки задается на входе месте с координатами ее вывода, потом генерируется сама рамка тремя прямоугольными областями LENx1 (HOR), LENxHEIGHT-2 (VERT), LENx1 (HOR) с соответствующими тайлами для сторон рамки, которые также задаются в отдельном списке. размер ресурса подобной рамки составлял бы 250 байт, функция конечно гораздо короче, но в принципе можно был обы использовать рле вариант, тогда возможно было бы избавиться от подобной процедуры. в любом случае, незачем в этой функции параметризировать аргументы. все их можно задать в самой же функции жесткно на заданные параметры рамки, если не планируется что-то кардинально менять, например давать рамку сообщения каждому персонажу отдельно.
- _main5_stage_complete отличается от стандартного вызова скрипта запуском основного скрипта руками в слот 2.
- анимация палитр используется в разных частях игры, но есть отдельный вызов ее для анимации самой первой катсцены с побегом кота, потому что иначе анимация палитр вызывается только из основного ингейм лупа.
- звуковые данные для музыки по какой-то причине в конце после оператора безусловного перехода, использующегося для зацикливания мелодии, содержат пару команд с остановом. естественно, эти пара команд никогда не выполняются. их можно удалить и освободить чуть чуть места.
- багнутый призовой объект на уровне 5С во второй комнате - это простой желудь, но из-за того, что набор тайлов спрайтов в этом уровне отличается от обычного, тайлы желудя в нем заменены на тайлы ручки-переключателя лент-транспортеров, что мы и видим в итоге.
- есть два известных места, где можно из окружающих предметов достать некий объект. первое место - бонус с жизнями после прохождения уровня. второе - комната с первым боссом, водяным кроликом. В обоих случая это происходит, потому как минимум один мета-тайл описания комнаты в этих местах, совпадает с мета-тайлом для специальных тайловых объектов уровня, которые можно поднимать. индексы мета-тайлов от F4 до FB распознаются движком как поднимаемые, даже есть им соответствует какой-то другой набор тайлов на экране. в комнате с бонусом сидит тайл F8, что идентично бетонному блоку. после пикапа объект ведет себя соответственно, но выглядит глючно, потому что в наборе тайлов спрайтов бонуса кусок, где должны находиться спрайты бетонного блока заменен на тайлы монетки из соответствующей бонус игры плюс кусок тайла "2up" для текущего же бонуса. палитра же выбирается соответствующая бетонному блоку. на первом боссе присутствуют мета-тайлы F8, FA и FB. первый и последний расположены так, что к ним нельзя подобраться сбоку. один же FA находится как раз в нижнем ряду тарелок на левой стороне правой тарелки.
- вообще, игра, конечно, скучная в плане начинки и неиспользуемого материала. практически все использовано за исключением одного явного места, где пропал фрейм анимации кирпичей в стене (блокированный вход бонуса с баскетболом). больше никаких достаточно больших кусков тайлов задней графики, практически все спрайты задействованы. неиспользованной музыки только два звука и один джингл. единственная суть копания тут - это перекомпиляция и оптимизация скриптов.
- в отличие от своего брата из первого уровня, мимикрирующий ящик со змеей из второго может падать с высоты. хотя изначальная позиция всех таких ящиков стационарная. обработка коллизий и падений в режиме ступора делается в отдельном месте, и никак не связано с основным состоянием объекта в закрытом состоянии. неизвестно, для чего понадобилось делать этот ящик падаемым, раз он ниразу нигде не падает. может быть есть какие-то экзотические ситуации, где он может таким стать, а может просто на этапе разработки это где-то использовалось для внезапного выпадения ящика с полотка, но потом решили отказаться.
- при подъеме любых объектов в игре имеется возможность их кинуть в заданном направлении. каждый скриптовой объект обрабатывает свое состояние поднятости сам по-своему. есть три типа объектов, которые можно кинуть: ящик, второй игрок и враг в ступоре. по умолчанию урон ящика составляет 1 хитпоинт, соответственно он отнимает столько же от любого объекта, с которым столкнется. игрок же не выстреливает и не является пулей при метании. но при движении игрока, несущего ящик или другого игрока непрерывно в одну и ту же сторону, каждые два фрейма прибавляется счетчик, когда он становится больше примерно 30 (т.е. где-то одну секунду движения), носимый объект, включая игрока, начинает мигать и готов к супер-броску. кинутый в мигающем состоянии ящик или другой игрок оба являются пулями по типу и у обоих урон меняется на 2, так что боссов он снимает в два раза быстрее. этим можно пользоваться при игре на двоих. третий тип метательных объектов - враг в ступоре - не имеет функции мигания, потому для всех таких объектов при метании урон устанавливается в 2 автоматически. любой кинутый враг всегда летит с удвоенным уроном.